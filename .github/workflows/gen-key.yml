name: Generate GPG Key
on: workflow_dispatch # You trigger this manually from the "Actions" tab

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - name: Generate Key
        run: |
          gpg --batch --full-generate-key <<EOF
          Key-Type: RSA
          Key-Length: 4096
          Subkey-Type: RSA
          Subkey-Length: 4096
          Name-Real: prasadbabu
          Name-Email:dpbabu@gmail.com
          Expire-Date: 0
          Passphrase: changeit
          %commit
          EOF
          
          # Get the Long Key ID (The last 8 or 16 characters)
          KEY_ID=$(gpg --list-secret-keys --keyid-format LONG | grep sec | awk '{print $2}' | cut -d'/' -f2)
          echo "Your Key ID is: $KEY_ID"

          echo "--- PUBLIC KEY ---"
          gpg --armor --export $KEY_ID
          
          echo "--- PRIVATE KEY (Base64) ---"
          # This is what you put in GitHub Secrets
          gpg --armor --export-secret-keys $KEY_ID | base64 -w0
